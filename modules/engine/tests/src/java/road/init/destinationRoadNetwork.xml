<?xml version="1.0" encoding="UTF-8"?>

<TrafficModel
	xmlns="http://traffic.cos.ru/cossim/TrafficModelDefinitionFile0.1">
	<RoadNetwork
		xmlns="http://traffic.cos.ru/cossim/TrafficModelDefinitionFile0.1">
		<!-- Origin #1 -> Link #2 (Segment #3, one lane) -> Node #4 (TR #5) -> 
			Link #6 (Segment #7, one lane) -> Destination #8 -->
		<Links>
			<Link>
				<id>2</id>
				<sourceNodeId>1</sourceNodeId>
				<destinationNodeId>4</destinationNodeId>
				<length>100.0</length>
				<Segments>
					<TrapeziumSegment>
						<id>3</id>
						<length>100.0</length>
						<prevSegmentId>-1</prevSegmentId>
						<nextSegmentId>-1</nextSegmentId>
						<Lanes>
							<Lane>
								<index>0</index>
								<length>100.0</length>
								<width>3.0</width>
								<prevLaneIndex>-1</prevLaneIndex>
								<nextLaneIndex>-1</nextLaneIndex>
							</Lane>
						</Lanes>
						<trapeziumShift>0.0</trapeziumShift>
						<TrapeziumGeometry>
							<LeftSide>
								<Start>
									<x>0</x>
									<y>1</y>
								</Start>
								<End>
									<x>100</x>
									<y>1</y>
								</End>
							</LeftSide>
							<RightSide>
								<Start>
									<x>0</x>
									<y>-1</y>
								</Start>
								<End>
									<x>100</x>
									<y>-1</y>
								</End>
							</RightSide>
						</TrapeziumGeometry>
					</TrapeziumSegment>
				</Segments>
				<Waypoints>
					<Waypoint>
						<id>0</id>
						<x>-11.188</x>
						<y>-16.812</y>
					</Waypoint>
					<Waypoint>
						<id>3</id>
						<x>80.688</x>
						<y>-16.188</y>
					</Waypoint>
				</Waypoints>
			</Link>
			<Link>
				<id>6</id>
				<sourceNodeId>4</sourceNodeId>
				<destinationNodeId>8</destinationNodeId>
				<length>100.0</length>
				<Segments>
					<TrapeziumSegment>
						<id>7</id>
						<length>100.0</length>
						<prevSegmentId>-1</prevSegmentId>
						<nextSegmentId>-1</nextSegmentId>
						<Lanes>
							<Lane>
								<index>0</index>
								<length>100.0</length>
								<width>3.0</width>
								<prevLaneIndex>-1</prevLaneIndex>
								<nextLaneIndex>-1</nextLaneIndex>
							</Lane>
						</Lanes>
						<trapeziumShift>0.0</trapeziumShift>
						<TrapeziumGeometry>
							<LeftSide>
								<Start>
									<x>108</x>
									<y>9</y>
								</Start>
								<End>
									<x>108</x>
									<y>109</y>
								</End>
							</LeftSide>
							<RightSide>
								<Start>
									<x>110</x>
									<y>9</y>
								</Start>
								<End>
									<x>110</x>
									<y>109</y>
								</End>
							</RightSide>
						</TrapeziumGeometry>
					</TrapeziumSegment>
				</Segments>
				<Waypoints>
					<Waypoint>
						<id>0</id>
						<x>-11.188</x>
						<y>-16.812</y>
					</Waypoint>
					<Waypoint>
						<id>3</id>
						<x>80.688</x>
						<y>-16.188</y>
					</Waypoint>
				</Waypoints>
			</Link>
		</Links>
		<Nodes>
			<RegularNode>
				<id>4</id>
				<TransitionRules>
					<TransitionRule>
						<id>5</id>
						<length>20.0</length>
						<width>2.7</width>
						<sourceLinkId>2</sourceLinkId>
						<sourceLaneIndex>0</sourceLaneIndex>
						<destinationLinkId>6</destinationLinkId>
						<destinationLaneIndex>0</destinationLaneIndex>
						<BezierCurveGeometry>
							<ReferencePoints>
								<Point>
									<x>100</x>
									<y>0</y>
								</Point>
								<Point>
									<x>102</x>
									<y>0</y>
								</Point>
								<Point>
									<x>109</x>
									<y>7</y>
								</Point>
								<Point>
									<x>109</x>
									<y>9</y>
								</Point>
							</ReferencePoints>
						</BezierCurveGeometry>
					</TransitionRule>
				</TransitionRules>
				<PolygonGeometry> <!-- Definition of the node geometry -->
					<!-- Ordered list of points that defines node's polygon -->
					<Point>
						<x>100</x>
						<y>-1</y>
					</Point>
					<Point>
						<x>110</x>
						<y>-1</y>
					</Point>
					<Point>
						<x>110</x>
						<y>9</y>
					</Point>
					<Point>
						<x>100</x>
						<y>9</y>
					</Point>
				</PolygonGeometry>
			</RegularNode>
			<OriginNode>
				<id>1</id>
				<outgoingLinkId>2</outgoingLinkId>
				<CircleGeometry>
					<Center>
						<x>0</x>
						<y>0</y>
					</Center>
					<radius>1.5</radius>
				</CircleGeometry>
			</OriginNode>
			<DestinationNode>
				<id>8</id>
				<incomingLinkId>6</incomingLinkId>
				<CircleGeometry>
					<Center>
						<x>109</x>
						<y>109</y>
					</Center>
					<radius>1.5</radius>
				</CircleGeometry>
			</DestinationNode>
		</Nodes>
	</RoadNetwork>
	<Agents>
		<Origins>
			<Origin>
				<originNodeId>1</originNodeId> <!-- id of an origin node in the ru.cos.sim.visualizer.sim.road network from which this 
					agent will generate vehicles -->
				<TimePeriods>
					<TimePeriod>
						<duration>3600</duration>
						<numberOfVehicles>100</numberOfVehicles>
						<Destinations>
							<Destination>
								<weight>1</weight>
								<destinationNodeId>3</destinationNodeId>
							</Destination>
						</Destinations>
						<VehicleProfiles>
							<VehicleProfile>
								<weight>1</weight>
								<RegularVehicle>
									<vehicleId>Test</vehicleId>
									<length>4.5</length>
									<width>2.5</width>
									<class>Car</class>
									<CompositeDriver>
										<destinationNodeId>3</destinationNodeId>
										<Route>1,2,3,4,5,6</Route>
										<Parameters>
											<!-- IDM parameters -->
											<maxSpeed>15.0</maxSpeed>
											<maxAcceleration>4.0</maxAcceleration>
											<comfortDeceleration>2.0</comfortDeceleration>
											<minDistance>2.0</minDistance>
											<desiredHeadwayTime>2.0</desiredHeadwayTime>
											<abruptness>4.0</abruptness>
											<!-- MOBIL parameters -->
											<politeness>0.5</politeness>
											<accThreshold>0.5</accThreshold>
											<!-- OLI parameter -->
											<intersectionGapTime>3.0</intersectionGapTime>
										</Parameters>
									</CompositeDriver>
								</RegularVehicle>
							</VehicleProfile>
						</VehicleProfiles>
					</TimePeriod>
				</TimePeriods>
			</Origin>
		</Origins>
	</Agents>
</TrafficModel>