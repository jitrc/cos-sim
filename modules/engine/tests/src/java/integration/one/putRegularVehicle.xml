<?xml version="1.0" encoding="UTF-8"?>

<TrafficModel xmlns="http://traffic.cos.ru/cossim/TrafficModelDefinitionFile0.1">
	<RoadNetwork>
		<!-- 
		Origin #1 -> Link #2 (Segment #3, one lane) -> Node #4 	(TR #5) -> Link #6 (Segment #7, one lane) -> Destination #8
		-->
		<Links>
			<Link>
				<id>2</id>
				<sourceNodeId>1</sourceNodeId>
				<destinationNodeId>4</destinationNodeId>
				<length>100.0</length>
				<Segments>
					<TrapeziumSegment>
						<id>3</id> 
						<length>100.0</length>
						<prevSegmentId>-1</prevSegmentId>
						<nextSegmentId>-1</nextSegmentId>
						<Lanes>
							<Lane>
								<index>0</index> 
								<length>100.0</length>
								<width>3.0</width>
								<prevLaneIndex>-1</prevLaneIndex>
								<nextLaneIndex>-1</nextLaneIndex>
							</Lane>
						</Lanes>
						<trapeziumShift>0.0</trapeziumShift>
						<TrapeziumGeometry>
							<LeftSide>
								<Start>
									<x>-11.164</x>
									<y>-20.312</y>
								</Start>
								<End>
									<x>80.711</x>
									<y>-19.687</y>
								</End>
							</LeftSide>
							<RightSide>
								<Start>
									<x>-11.211</x>
									<y>-13.313</y>
								</Start>
								<End>
									<x>80.664</x>
									<y>-12.688</y>
								</End>
							</RightSide>
						</TrapeziumGeometry>
					</TrapeziumSegment>
				</Segments>
				<Waypoints>
					<Waypoint>
						<id>0</id>
						<x>-11.188</x>
						<y>-16.812</y>
					</Waypoint>
					<Waypoint>
						<id>3</id>
						<x>80.688</x>
						<y>-16.188</y>
					</Waypoint>
				</Waypoints>
			</Link>
			<Link>
				<id>6</id>
				<sourceNodeId>4</sourceNodeId>
				<destinationNodeId>8</destinationNodeId>
				<length>100.0</length>
				<Segments>
					<TrapeziumSegment>
						<id>7</id> 
						<length>100.0</length>
						<prevSegmentId>-1</prevSegmentId>
						<nextSegmentId>-1</nextSegmentId>
						<Lanes>
							<Lane>
								<index>0</index> 
								<length>100.0</length>
								<width>3.0</width>
								<prevLaneIndex>-1</prevLaneIndex>
								<nextLaneIndex>-1</nextLaneIndex>
							</Lane>
						</Lanes>
						<trapeziumShift>0.0</trapeziumShift>
						<TrapeziumGeometry>
							<LeftSide>
								<Start>
									<x>-11.164</x>
									<y>-20.312</y>
								</Start>
								<End>
									<x>80.711</x>
									<y>-19.687</y>
								</End>
							</LeftSide>
							<RightSide>
								<Start>
									<x>-11.211</x>
									<y>-13.313</y>
								</Start>
								<End>
									<x>80.664</x>
									<y>-12.688</y>
								</End>
							</RightSide>
						</TrapeziumGeometry>
					</TrapeziumSegment>
				</Segments>
				<Waypoints>
					<Waypoint>
						<id>0</id>
						<x>-11.188</x>
						<y>-16.812</y>
					</Waypoint>
					<Waypoint>
						<id>3</id>
						<x>80.688</x>
						<y>-16.188</y>
					</Waypoint>
				</Waypoints>
			</Link>
		</Links>
		<Nodes>
			<RegularNode>
				<id>4</id>
				<TransitionRules>
					<TransitionRule>
						<id>5</id>
						<length>20.0</length>
						<width>2.7</width>
						<sourceLinkId>2</sourceLinkId>
						<sourceLaneIndex>0</sourceLaneIndex>
						<destinationLinkId>6</destinationLinkId>
						<destinationLaneIndex>0</destinationLaneIndex>
						<BezierCurveGeometry>
							<ReferencePoints>
								<Point>
									<x>80.699</x>
									<y>-17.937</y>
								</Point>
								<Point>
									<x>84.44</x>
									<y>-17.833</y>
								</Point>
								<Point>
									<x>88.181</x>
									<y>-14.292</y>
								</Point>
								<Point>
									<x>91.922</x>
									<y>-17.625</y>
								</Point>
							</ReferencePoints>
						</BezierCurveGeometry>
					</TransitionRule>
				</TransitionRules>
				<PolygonGeometry> <!-- Definition of the node geometry -->
					<!-- Ordered list of points that defines node's polygon -->
					<Point>
						<x>80.711</x>
						<y>-19.687</y>
					</Point>
					<Point>
						<x>91.907</x>
						<y>-19.375</y>
					</Point>
					<Point>
						<x>91.968</x>
						<y>-12.375</y>
					</Point>
					<Point>
						<x>80.664</x>
						<y>-12.688</y>
					</Point>
				</PolygonGeometry>
			</RegularNode>
			<OriginNode>
				<id>1</id>
				<outgoingLinkId>2</outgoingLinkId>
				<CircleGeometry>
					<Center>
						<x>34.5</x>
						<y>-323.3</y>
					</Center>
					<radius>34.6</radius>
				</CircleGeometry>
			</OriginNode>
			<DestinationNode>
				<id>8</id>
				<incomingLinkId>6</incomingLinkId>
				<CircleGeometry>
					<Center>
						<x>34.5</x>
						<y>-323.3</y>
					</Center>
					<radius>34.6</radius>
				</CircleGeometry>
			</DestinationNode>
		</Nodes>
	</RoadNetwork>
	<Agents>
		<Vehicles>
			<RegularVehicle>
				<vehicleId>JP13K</vehicleId> <!-- unique ru.cos.sim.visualizer.sim.vehicle id, for example, ru.cos.sim.visualizer.sim.vehicle's plate number-->
				<length>4.5</length>
				<width>2.5</width>
				<class>Car</class>
				<CompositeDriver>
					<destinationNodeId>8</destinationNodeId>
					<Route>2,6</Route>
					<Parameters>
						<!-- IDM parameters -->
						<maxSpeed>15.0</maxSpeed>
						<maxAcceleration>4.0</maxAcceleration>
						<comfortDeceleration>2.0</comfortDeceleration>
						<minDistance>2.0</minDistance>
						<desiredHeadwayTime>2.0</desiredHeadwayTime>
						<abruptness>4.0</abruptness>
						<!-- MOBIL parameters -->
						<politeness>0.5</politeness>
						<accThreshold>0.5</accThreshold>
						<!-- OLI parameter -->
						<intersectionGapTime>3.0</intersectionGapTime>
					</Parameters>
				</CompositeDriver>
				<LinkLocation>
					<position>50.0</position>
					<shift>0.3</shift>
					<linkId>2</linkId>
					<segmentId>3</segmentId>
					<laneIndex>0</laneIndex>
				</LinkLocation>
				<speed>10.2</speed>
			</RegularVehicle>
		</Vehicles>
	</Agents>
</TrafficModel>